# IMAGE FORMATION
# RADIOMETRY — MEASURING LIGHT 

## 1.1 Light in Space
빛의 측정은 그 자체로 방사선 측정(radiometry)으로 알려진 분야입니다.  
광원 패치에서 표면 패치로 에너지가 전달되는 방식과 표면에 도달하면 에너지가 어떻게 변하는지 설명하는 일련의 단위가 필요합니다.  
가장 먼저 연구해야 할 주제는 행동 비행 공간입니다.

### 1.1.1 Foreshortening
표면의 각 점은 빛이 도달하거나 떠날 수 있는 반구 방향입니다(그림 1.1).  

<img width="762" alt="스크린샷 2025-04-21 오후 9 54 43" src="https://github.com/user-attachments/assets/d6100a9a-2a36-4d59-9382-35eabf895d55" />

이 입력 반구에서 동일한 패턴을 생성하는 두 소스는 이 시점에서 표면에 동일한 영향을 미쳐야 합니다(표면의 관찰자는 이를 구분할 수 없기 때문입니다).  
이는 소스에도 적용되며, 소스의 출력 반구에서 동일한 패턴을 생성하는 두 표면은 소스로부터 동일한 양의 에너지를 받아야 합니다.  
이는 조명이 이동하는 방향에 대한 표면 패치의 방향이 중요하다는 것을 의미합니다.  
광원은 조명이 이동하는 방향에 대해 "더 작게" 보입니다. 마찬가지로 조명이 이동하는 방향에 대해 패치가 조정되며, 소스에 대해 "더 작게" 조정됩니다.  
이 효과는 단축(foreshortening)이라고 알려져 있습니다. 단축이 중요한 이유는 소스를 작은 패치로 보는 관점에서 보면 크게 단축되는 큰 패치처럼 보이며, 따라서 동일한 에너지를 받아야 하기 때문입니다.

### 1.1.2 Solid Angle
입력 반구에서 소스가 생성하는 패턴은 소스가 서브텐디드하는 입체각으로 설명할 수 있습니다.  
입체각은 평면 위의 각도와의 유사성에 의해 정의됩니다. 점 p에서 길이 dl의 무한한 최소 세그먼트에 의해 평면 위에 서브텐디드된 각도는 중심이 p인 단위 원에 선형 세그먼트를 투영하여 얻을 수 있으며, 결과적으로 라디안에서 필요한 각도가 됩니다(그림 1.2 참조). 선형 세그먼트는 무한히 짧기 때문에 무한히 작은 각도를 서브텐디드하며, 이 각도는 원의 중심 거리와 선의 방향에 따라 달라집니다:

$$d\phi = \frac{dl cos\theta}{r} $$

<img width="762" alt="스크린샷 2025-04-21 오후 10 12 04" src="https://github.com/user-attachments/assets/c656c5cd-99cc-481a-8287-9226e67432c0" />

곡선에 의해 종속된 각도는 무한히 작은 세그먼트와 합(적분!)으로 나누어 구할 수 있습니다.  
마찬가지로, 점 x에서 표면 패치에 의해 종속된 입체각은 패치를 중심이 x인 단위 구에 투영하여 얻을 수 있으며, 결과의 면적은 필요한 입체각으로, 현재 단위는 스테라디안(steradians)입니다.  
입체각은 일반적으로 기호 ω로 표시됩니다. 참고로, 입력 반구에서 "동일하게 보이는" 패치는 동일각 하위에 위치합니다.

패치(patchdA)의 면적이 작다면(무한소 형식으로 제안된 것처럼), 그 부분의 무한소 입체각은 패치의 면적과 그에 대한 거리로 쉽게 계산할 수 있습니다 

$$dw = \frac{dA cos\theta}{r^2}$$

여기서 용어는 그림 1.2에 나와 있습니다.  
실각은 일반적인 각좌표 원구(그림 1.2에 나와 있음)를 기준으로 작성할 수 있습니다.  
그림 1.1과 원호의 길이에 대한 표현을 통해, 각 θ과 φ에서 주어진 실각 원구의 영역을 잘라낸 유한한 단계(d θ, d φ)를 확인할 수 있습니다:

$$dw = sind\theta d\phi$$

### 1.1.3 Radiance
빛의 공간 분포는 위치와 방향의 함수입니다.  
예를 들어, 밤에 빈 방에서 화살촉으로 빛을 발하는 토치를 고려할 때, 우리는 토치가 어디에서 빛나고 있는지, 어느 방향에서 빛을 발하는지 알아야 합니다. 조명의 효과는 특정 지점과 방향에 삽입될 경우 표면의 파워 무한 패치가 받을 수 있는 에너지의 양으로 나타낼 수 있습니다. 우리는 이 접근법을 사용하여 측정 단위를 얻을 것입니다.

#### Definition of Radiance
빛의 공간 분포를 측정하는 적절한 단위 형식은 다음과 같이 정의됩니다:  
특정 지점에서 이동하는 에너지의 양, 단위 시간, 단위는 이동 방향에 수직인 단위각([?]부터) 단위각 단위입니다.

#### Radiance is Constant Along a Straight Line
방사광은 p1과 p2의 두 점(이들 사이에 시선이 있음)에 대해 p1의 방향에서 p2에 도달하는 방사광과 p2의 방향으로 이동하는 방사광이 동일하다는 매우 바람직한 특성을 가지고 있습니다. 

그림 1.3은 특정 방향으로 방사되는 표면의 패치를 보여줍니다. 정의에 따르면 패치의 방사광이 L(x1, θ, φ)이라면, 패치가 전달하는 에너지는 방향 θ 주변의 얽힌 고체 ω의 무한소 영역으로 전달됩니다

<img width="762" alt="스크린샷 2025-04-21 오후 10 31 09" src="https://github.com/user-attachments/assets/6a6249c6-7ecc-449a-ad86-964b040ead26" />

증명에 따르면, 방사율(radiance)은 (폐쇄되지 않은) 직선을 따라 일정합니다.

## 1.2 Light at Surfaces
형광(fluorescence)으로 알려진 이 효과는 상당히 흔합니다:  
전갈은 X선 조명 하에서 가시광선을 형광으로 발산하고, 인간의 치아는 자외선 아래에서 희미한 파란색을 형광으로 발산하며(나일론 속옷도 형광을 띠는 경향이 있으며, 가짜 치아는 일반적으로 자외선 차단제에서 자외선을 소멸시키는 결과를 초래합니다), 세탁은 자외선 아래에서 형광을 내는 세척제를 사용하여 밝게 보이도록 만들 수 있습니다. 또한 충분히 따뜻한 표면은 가시광선 범위에서 빛을 방출합니다.

### 1.2.1 Simplifying Assumptions
모든 효과는 국소적이라고 가정하는 것이 일반적이며 형광 방출이 없는 거시적 모델로 설명할 수 있습니다.

### 1.2.2 The Bidirectional Reflectance Distribution Function
#### Irradiance
들어오는 전력을 나타내기 위한 적절한 단위는 방사율(irradiance)로 정의되며, 단위당 입사 전력은 미리 줄어들지 않습니다.

#### The BRDF
국소 반사의 가장 일반적인 모델은 양방향 반사 분산 함수(bidirectional reflectance distribution function)로, 일반적으로 BRDF로 약칭됩니다.  
BRDF는 입사 복사에 대한 방사 방향의 방사율 비율로 정의됩니다.

#### Properties of the BRDF
이것이 우리에게 말해주는 것은 BRDF가 어떤 쌍의 들어오고 나가는 각도에 대해서는 클 수 있지만, 많은 각도에 대해서는 클 수 없다는 것입니다.

## 1.3 Important Special Cases
광량은 각도에 따라 달라지기 때문에 상당히 미묘한 양입니다. 예를 들어 위의 토치 빔 예제에서 공간 내 빛의 분포를 설명하는 데 이러한 일반성은 때때로 필수적입니다.

### 1.3.1 Radiosity
표면을 떠나는 방사광이 출구 각도와 무관하다면 방향에 명시적으로 의존하는 단위를 사용하여 설명하는 것은 의미가 없습니다.  
적절한 단위는 방사광(radiosity)으로, 표면의 단위 면적당 점을 남기는 총 전력으로 정의됩니다

#### The Radiosity of a Surface with Constant Radiance
기억해야 할 한 가지 결과는 방사율과 방사율이 각도와 무관한 표면 패치의 방사율 간의 관계입니다.

### 1.3.2 Directional Hemispheric Reflectance
BRDF는 또한 미묘한 양이며, BRDF 측정은 일반적으로 어렵고 비용이 많이 들며 특별히 반복 가능하지 않습니다. 이는 표면의 먼지와 노화 과정이 BRDF 측정에 상당한 영향을 미칠 수 있기 때문입니다.

많은 표면을 떠나는 빛은 주로 출구 각도와 무관합니다. 이 경우 표면의 자연스러운 반사 특성은 방향성 반구 반사(일반적으로 ρ dh)로 정의되며, 이는 표면에 의해 반사되는 반사 방향을 반대로 하는 입사 복사의 비율로 정의됩니다.

### 1.3.3 Lambertian Surfaces and Albedo
일부 표면의 경우 방향성 반구 반사율은 조명 방향에 의존하지 않습니다.  
이러한 표면의 예로는 면직물, 많은 카펫, 무광택 종이 및 무광택 페인트 등이 있습니다.  
공식적인 모델은 BRDF가 나가는 방향(그리고 상호성 원리에 따라 비방향성)과 독립적인 표면에 의해 제시됩니다.  
이는 표면을 떠나는 방사광이 각도와 무관하다는 것을 의미합니다.  
이러한 표면은 이상적인 확산 표면(ideal diﬀuse surfaces) 또는 램버트 곡면(Lambertian surfaces, 처음 아이디어를 공식화한 조지 램버트의 이름을 따서)으로 알려져 있습니다.

램버트 곡면의 경우 방향성 반구 반사율은 방향과 무관합니다. 이 경우 방향성 반구 반사율은 종종 확산 반사율 또는 알베도(diﬀusereflectanceor albedo)라고 불리며, ρ d로 표기됩니다.

### 1.3.4 Specular Surfaces
두 번째로 중요한 표면 유형은 광택이 나거나 거울과 같은 표면으로, 흔히 정반사면(specular surfaces, 라틴어 단어로 거울이라고 함)으로 알려져 있습니다.  
이상적인 정반사면은 이상적인 거울처럼 행동합니다. 특정 방향을 따라 도착하는 방사선은 표면 법선을 기준으로 들어오는 방사선의 방향을 반사하여 정반사 방향(specular direction)으로만 남을 수 있습니다.

#### Specular Lobes
일반적으로 광원과 같이 비교적 밝은 물체의 특정 반사만 볼 수 있습니다.  
따라서 반짝이는 페인트나 플라스틱 표면에서는 광원의 특정 방향을 따라 밝은 블롭(specularity, 종종 특이점이라고도 함)이 보이지만, 다른 특별한 효과는 거의 없습니다.  
정사엽의 모양을 모델링하는 것은 종종 필요하지 않습니다. 엽의 모양이 모델링될 때 가장 일반적인 모델은 점광원만 반사된다고 가정하는 Phong 모델입니다.  
n의 값이 크면 좁은 엽이 생기고, 작고 날카로운 종괴와 작은 값은 넓은 엽과 다소 흐릿한 경계를 가진 큰 종괴로 이어집니다.

### 1.3.5 The Lambertian + Specular Model
상대적으로 적은 수의 표면만이 이상적인 확산 또는 완벽하게 정사형입니다.  
매우 많은 표면이 람베르트 성분과 정사형 성분의 조합인 표면 BRDF를 가지고 있으며, 이는 일반적으로 좁은 엽의 형태를 가지고 있습니다. 일반적으로 정사형 성분은 정사형 알베도(specular
albedo)에 의해 가중치가 부여됩니다. 



