# Imaging and Image Representation
이 장의 주요 목적은 센서가 **2D 또는 3D 장면의 디지털 이미지를 생성하는 방법을 설명하는 것**입니다.
물리적 세계의 물체에서 반사되거나 침투하는 다양한 종류의 방사선은 서로 다른 이미징 장치에 의해 감지될 수 있습니다.  
2D 디지털 이미지는 물체에서 반사되거나 물체를 통해 전달되는 강도 샘플의 배열로, 이 이미지는 장면에 대한 결정을 내리기 위해 기계나 컴퓨터 프로그램에 의해 처리됩니다.  
종종 **2D 이미지는 3D 장면의 투영**을 나타내며, 이는 기계 비전과 이 책에서 가장 일반적으로 사용되는 표현입니다.  
이 장의 마지막에서는 3D 세계의 구조와 2D 이미지의 구조 사이의 몇 가지 관계에 대해 논의합니다.

## 2.1 Sensing Light
인간의 눈 수용체에 있는 화학 물질은 약 400나노미터(자외선)에서 800나노미터(빨간색) 범위의 파장을 가진 방사선(빛)에 민감합니다.  
뱀과 CCD 센서(아래 참조)는 800나노미터(적외선) 이상의 파장을 감지할 수 있습니다. 매우 짧은 길이의 X-선을 감지하는 장치와 긴 전파를 감지하는 장치가 있습니다.

<img width="749" alt="스크린샷 2025-04-16 오후 12 45 14" src="https://github.com/user-attachments/assets/f4c4b291-28f4-49d3-a794-40e0e2dbff0a" />

그림 2.1은 일반적인 사진의 간단한 모델을 보여줍니다:  
단일 소스(태양 또는 플래시 전구)에 의해 조명된 표면 요소는 필름의 화학 물질을 통해 카메라를 향해 방사선을 반사합니다. 이 상황에 대한 자세한 내용은 6장에서 다룹니다.  
**빛 범위의 파장은 물체 표면 근처에서 메커니즘을 생성하거나 반사하여 발생**합니다.

## 2.2 Imaging Devices
디지털 이미지를 생성하는 장치에는 다양한 종류가 있습니다. 이들은 감지되는 현상뿐만 아니라 전기 기계적 설계에서도 차이가 있습니다.  
이 장에서는 여러 가지 다른 센서에 대해 설명합니다.

### CCD Cameras
<img width="847" alt="스크린샷 2025-04-16 오후 12 47 30" src="https://github.com/user-attachments/assets/e362a764-2921-488c-b60e-41f22881f6e5" />

그림 2.2는 기계 비전 시스템에 가장 유연하고 일반적인 입력 장치인 전하 결합 장치(CCD) 기술을 사용하여 제작된 카메라를 보여줍니다.  
CCD 카메라는 작은 고체 셀이 빛에 반응하는 화학 필름 대신 이미지 평면을 제외한 가족 사진에 일반적으로 사용되는 35mm 필름 카메라와 매우 유사합니다.  
각 셀은 수신한 빛 에너지를 전하로 변환합니다. 모든 셀은 먼저 0으로 제거된 다음 셀에 떨어지는 빛 에너지에 대한 응답을 통합하기 시작합니다.  
감지 시간을 제어하기 위해 셔터가 필요할 수도 있고 필요하지 않을 수도 있습니다.  
**이미지 평면은 컴퓨터 입력 프로세스를 통해 행 단위로 읽을 수 있는 디지털 메모리 역할**을 합니다. 그림은 간단한 단색 카메라를 보여줍니다.

디지털 이미지에 500줄과 500줄의 바이트 크기 회색 값이 있는 경우, 25만 바이트의 메모리 배열을 얻을 수 있습니다. 

<img width="606" alt="스크린샷 2025-04-16 오후 12 51 11" src="https://github.com/user-attachments/assets/69f21afc-ab7a-4c70-98b4-6ee692881cf6" />

그림 2.3은 카메라 입력과 그래픽 출력을 모두 갖춘 전체 컴퓨터 시스템을 스케치한 것입니다. 이는 산업 비전 작업이나 의료 영상 작업을 위한 전형적인 시스템입니다.  
또한, 저렴한 카메라가 원격 회의 목적으로 이미지를 촬영할 수 있는 멀티미디어 컴퓨터에서도 일반적입니다.  
고속 이미지 저장소로서 프레임 버퍼의 역할은 여기서 중심적입니다:  
**카메라는 아날로그에서 디지털로 변환**된 후 **프레임 버퍼에 디지털 형태로 저장된 입력 이미지를 제공하여 사용자에게 표시**하고 다양한 컴퓨터 알고리즘에 의해 처리할 수 있도록 합니다.  
프레임 버퍼는 실제로 여러 이미지 또는 그 파생물을 저장할 수 있습니다.

디지털 이미지를 처리하는 컴퓨터 프로그램은 I [r, c] 또는 I[r][c]로 **픽셀 값**을 나타낼 수 있으며, 여기서 I는 배열 이름이고 r과 e는 각각 행과 열 번호입니다.  
이 책은 제시된 알고리즘에서 이러한 표기법을 사용합니다. 일부 카메라는 이진 이미지를 생성하도록 설정할 수 있습니다.  
픽셀은 어두운 대 밝은 것을 나타내는 0 또는 1이거나 그 반대입니다.  
간단한 알고리즘은 임계값 t 이하의 모든 픽셀을 0으로, 그 위의 모든 픽셀을 1로 변경하여 동일한 효과를 낼 수 있습니다.  
1장에서는 높은 혈류와 낮은 혈류를 대조하기 위해 자기 공명 이미지를 임계값으로 설정한 예를 제시했습니다.

### Image Formation
이미지 형성의 기하학적 구조는 3D 장면의 각 지점을 투영 중심 또는 렌즈 중심을 통해 이미지 평면에 투영하는 것으로 개념화할 수 있습니다. 

<img width="847" alt="스크린샷 2025-04-16 오후 12 47 30" src="https://github.com/user-attachments/assets/e362a764-2921-488c-b60e-41f22881f6e5" />

그림 2.2에는 두 개의 볼록한 표면을 가진 단일 렌즈가 표시되어 있지만 대부분의 실제 렌즈는 두 개 이상의 굴절 표면을 가진 복합 렌즈입니다.  
두 가지 매우 중요한 점이 있습니다. 첫째, **렌즈는 빛이 3D 지점에서 렌즈에 도달하는 전체 원뿔을 통해 이미지 지점에 도달**한다는 것입니다.  
그림 2.2의 꽃병 상단에서 세 개의 광선이 투사되는 모습이 보여지며, 이는 꽃병 상단에만 렌즈가 수집한 원뿔의 극단값을 결정합니다.  
다른 모든 장면 지점에도 유사한 원뿔이 존재합니다. 렌즈의 기하학적 불완전성, 다양한 색상의 빛의 굴절 및 기타 현상으로 인해 원뿔은 실제로 이미지 평면에 유한하거나 흐릿한 점인 혼란의 원을 초래합니다.  
둘째, **CCD 센서 배열은 무한한 점이 아닌 물리적으로 이산적인 단위로 구성**되므로 각 센서 셀은 3D 표면의 많은 인접 지점에서 수신한 광선을 통합합니다.  
이러한 두 가지 효과로 인해 이미지가 흐려지고 선명도와 감지할 수 있는 가장 작은 장면 세부 사항의 크기가 제한됩니다.

512*512 이미지라 했을 때 선형 배열을 사용하면 1000~5000픽셀을 한 줄로 사용할 수 있습니다. 

원형 배열은 시계나 속도계와 같은 아날로그 다이얼을 검사하는 데 유용합니다. 

### Video cameras
비디오 카메라는 인간 소비를 위한 이미지를 초당 30초의 속도로 기록하여 단일 이미지나 프레임에 표현된 공간적 특징 외에도 시간이 지남에 따라 물체의 움직임을 표현할 수 있게 합니다.  
인간의 원활한 인식을 위해 초당 60개의 하프 프레임이 사용됩니다. 이 하프 프레임은 모두 홀수 이미지 행으로, 모든 짝수 이미지 행이 번갈아 가며 이어집니다. 오디오 신호도 인코딩됩니다. 

**비디오 시퀀스의 프레임은 마커로 구분되며, 일부 이미지 압축 방식은 일반적으로 데이터 양을 줄이기 위해 사용**됩니다.

기계 비전을 위한 CCD 카메라 기술은 때때로 사람이 사용할 수 있도록 설계된 디스플레이 표준에 문제가 있었습니다.  
첫째, 사람에게 부드러운 화면을 제공하기 위해 필요한 비디오 시퀀스에서 홀수/짝수 프레임을 교차 배치하는 것은 기계 비전에 불필요한 복잡성을 초래합니다.  
둘째, 많은 CCD 배열에는 가로와 세로의 비율이 4:3인 픽셀이 있었는데, 이는 대부분의 디스플레이가 4:3 크기 비율을 가지고 있기 때문입니다.  
정사각형 픽셀과 단일 스케일 매개변수가 기계 비전에 도움이 될 것입니다. 

### The Human Eye
대략적으로 말하자면, 인간의 눈은 외부에 초점 거리 20mm 렌즈가 있는 구형 카메라로, 렌즈 반대편에 있는 망막에 이미지를 초점을 맞추고 구 표면 안쪽에 고정되어 있습니다(그림 2.5 참조).  
홍채는 동공의 크기를 조절하여 렌즈를 통과하는 빛의 양을 조절합니다. 

## 2.3 * Problems in Digital Images
몇 가지 문제가 감지 프로세스에 영향을 미치며, 그 중 가장 중요한 문제는 아래에 나열되어 있습니다.

이러한 문제의 조합으로 인한 전반적인 효과는 기하학적 구조와 강도 모두에서 약간의 왜곡이 있는 이미지입니다. 

### geometric distortion
이미징 프로세스에는 여러 가지 방식으로 **기하학적 왜곡**이 존재합니다.  
렌즈가 불완전하여 장면 표면 요소에서 수집되는 빛의 콩이 의도한 대로 정확히 구부러지지 않을 수 있습니다.  
배럴 왜곡(Barrel distortion)은 일반적으로 작은 초점 거리 렌즈에서 관찰되며, 그림 2.6의 오른쪽에 표시된 것처럼 장면 주변의 직선이 이미지의 중심에서 멀어지는 것처럼 보입니다.

<img width="847" alt="스크린샷 2025-04-16 오후 1 05 50" src="https://github.com/user-attachments/assets/829d18f2-34d9-4cbd-9320-2e89a8196fe6" />

### scattering
방사선 빔은 **통과하는 매질에 의해 구부러지거나 분산**될 수 있습니다. 항공 및 위성 이미지는 대기에 렌즈와 같은 특성을 부여하는 수증기 또는 온도 구배로 인해 이러한 영향에 특히 취약합니다.

### blooming
CCD 셀과 같은 개별 검출기는 서로 완벽하게 절연되어 있지 않기 때문에 **한 셀에서 수집된 전하가 인접 셀로 누출**될 수 있습니다.  
블루밍이라는 용어는 이미지 평면의 매우 밝은 영역에서 이러한 누출이 퍼져나가 그림 2.6(가운데)에 표시된 것처럼 이미지에 실제보다 더 큰 밝은 '꽃'이 피는 현상에서 비롯됩니다.

### CCD variations
제조의 불완전성으로 인해 **동일한 빛의 강도에 대한 서로 다른 셀의 반응에 차이**가 있을 수 있습니다.  
강도를 정확하게 해석하려면 균일한 조명으로 보정하여 각 픽셀에 대해 스케일 팩터 s[r,c]와 시프트 t[r,c]의 전체 배열을 결정해야 할 수 있으며, 이를 통해 강도를 Iz[r,e] = s[r,c]I[r,c] + tr,c)로 복원할 수 있습니다.  
극단적인 경우 CCD 배열에는 전혀 응답이 없는 일부 죽은 셀이 있을 수 있습니다. 이러한 결함은 검사를 통해 감지할 수 있습니다: 하나의 소프트웨어 해결책은 죽은 셀의 응답을 이웃 셀의 평균 응답으로 할당하는 것입니다.

### clipping or wrap-around
아날로그에서 디지털 변환에서는 **매우 높은 강도가 최대값으로 클리핑되거나 고차 비트가 손실되어 값이 인코딩으로 감싸져 낮은 강도로 변환**될 수 있습니다.  
회색 스케일 이미지에서는 랩어라운드의 결과가 밝은 영역으로 나타나며, 색상 이미지에서는 색상이 눈에 띄게 변할 수 있습니다.  
그림 2.6의 왼쪽 이미지는 랩어라운드를 보여줍니다: 밝은 선의 일부 교차점에서는 두 선의 픽셀보다 더 어두운 픽셀이 나타납니다.

### chromatic distortion
렌즈에 따라 **빛의 파장이 다르게 구부러집니다(엔스의 굴절률은 파장에 따라 달라집니다)**.  
따라서 동일한 장면 지점에서 다른 파장의 빛 에너지가 실제로 검출기에서 몇 픽셀 떨어진 곳을 이미징할 수 있습니다.  
예를 들어, 장면 주변에 있는 매우 선명한 흑백 경계의 이미지는 이미지의 여러 픽셀에 걸쳐 강도 변화의 램프를 형성할 수 있습니다.

### quantization effects
디지털화 과정은 장면의 이산 영역에서 강도 샘플을 수집하여 이를 이산 회색 값 집합 중 하나에 매핑하므로 혼합 및 반올림 문제 모두에 취약합니다. 이러한 문제는 다음 섹션에서 더 자세히 설명합니다.

## 2.4 Picture Functions and Digital Images
### Types of images
그림 함수는 이미지를 두 변수의 함수로 간주하는 것이 유익한 분석에 자주 사용되는 수학적 모델입니다. 그런 다음 이미지를 분석하는 데 기능적 분석을 사용할 수 있습니다. 

디지털 이미지는 2D 직사각형 배열의 이산 값일 뿐입니다. 이미지 공간과 강도 범위는 모두 이산 값으로 양자화되어 이미지를 2D 컴퓨터 메모리 구조에 저장할 수 있습니다.  
강도는 0에서 255까지의 값을 허용하는 8비트(1바이트) 숫자로 기록하는 것이 일반적입니다. 

컬러 이미지의 각 픽셀에는 3개의 이러한 값이 필요합니다. 일부 의료 응용 분야에서는 10비트 인코딩을 사용하여 1024개의 다른 강도 값을 허용합니다. 

디지털 이미지는 이 아날로그 이미지를 이산 위치에서 샘플링하고 해당 위치의 강도를 이산 값으로 표현함으로써 형성됩니다.  
모든 실제 이미지는 위치와 강도 모두에서 정밀도를 제한하는 물리적 과정의 영향을 받습니다.

#### 2 DEFINITION
이미지는 2D 이미지 F(x,y)로, 각 나선형 점(x,y)에 대해 무한 정밀도를 가지며, 각 나선형 점(x,y)에 대해 집중적으로 무한 정밀도를 가집니다.

#### 3 DEFINITION
디지털 이미지는 2D 이미지 I [r, c]는 각각의 강도 샘플이 제한된 정밀도로 표현된 이산 2D 배열로 표현됩니다.

두 개의 실제 공간 매개변수의 함수로서 이미지의 수학적 모델은 이미지를 설명하고 이미지에 대한 연산을 정의하는 데 매우 유용합니다.  

<img width="847" alt="스크린샷 2025-04-16 오후 1 24 20" src="https://github.com/user-attachments/assets/f5300190-3185-402e-8b26-b05ac6ecfcd9" />

그림 2.7(d)는 이미지의 픽셀이 이미지 평면의 여러 지점 [x, y]에서 촬영한 연속 이미지의 샘플임을 보여줍니다.  
W의 거리에 걸쳐 X 방향으로 샘플이 M개 있는 경우 픽셀 간의 X 간격 $Δx$는 W/M입니다.  
픽셀의 중심점과 강도 샘플이 포함된 배열 셀을 연결하는 공식은 오른쪽 그림에 나와 있습니다.

#### 4 DEFINITION
그림 함수는 그림의 수학적 표현 f(x,y)를 두 공간 변수 x와 y의 함수로 나타낸 것입니다.  
x와 y는 그림의 점을 정의하는 실수 값이며, f(x,y)는 일반적으로 (x,y) 지점에서 그림의 강도를 정의하는 실수 값이기도 합니다.

#### 5 DEFINITION
그레이 스케일 이미지는 픽셀당 하나의 집중 값을 갖는 단색 디지털 이미지 I [r,c]입니다.

#### 6 DEFINITION
다중 스펙트럼 이미지는 각 공간 점 또는 픽셀에 값 벡터가 있는 2D 이미지 M(x,y)입니다. 이미지가 실제로 컬러 이미지인 경우 벡터에는 3개의 요소가 있습니다.  
그레이 스케일 이미지는 픽셀당 하나의 집중적인 값을 갖는 단색 이중 이미지 I[r] 입니다.

#### 7 DEFINITION
이진 이미지는 모든 픽셀 값이 0 또는 1인 디지털 이미지입니다.

#### 8 DEFINITION
레이블이 지정된 이미지는 디지털 이미지 L[r, c]로, 피렐 값은 유한 알파벳의 기호입니다. 픽셀의 기호 값은 해당 픽셀에 대한 어떤 결정의 결과를 나타냅니다. 관련 개념으로는 주제 이미지와 의사 색상 이미지가 있습니다.

좌표계는 이미지의 개별 픽셀을 처리하거나 컴퓨터 프로그램에서 작동하거나 수학 공식으로 참조하거나 장치 좌표에 따라 상대적으로 처리하는 데 사용되어야 합니다.  
이 책과 다른 곳에서 사용되는 다양한 시스템은 그림 2.7에 나와 있습니다. 안타깝게도 컴퓨터 도구마다 다른 시스템을 사용하는 경우가 많으며 사용자는 이에 익숙해져야 합니다.  
다행히도 개념은 좌표계와 연결되어 있지 않습니다. 이 책에서는 일반적으로 수학 텍스트와 일치하는 데카르트 좌표계를 사용하여 개념을 논의하는 반면, 이미지 처리 알고리즘은 래스터 좌표계를 사용합니다.


